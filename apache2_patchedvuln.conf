<VirtualHost *:8081>
    ServerName localhost

    WSGIDaemonProcess patchedvulnerableweb user=phuong group=phuong threads=5 python-home=/home/phuong/PatchedVulnerableWeb/venv
    WSGIScriptAlias / /home/phuong/PatchedVulnerableWeb/wsgi.py

    <Directory /home/phuong/PatchedVulnerableWeb>
        WSGIProcessGroup patchedvulnerableweb
        WSGIApplicationGroup %{GLOBAL}
        Require all granted
    </Directory>

    # Pass proxy headers from Nginx to Flask
    SetEnvIf X-Forwarded-Proto ^https$ HTTPS=on
    SetEnvIf X-Forwarded-Port ^([0-9]+)$ SERVER_PORT=$1
    RequestHeader set X-Script-Name "/"

    ErrorLog ${APACHE_LOG_DIR}/patchedvulnerableweb_error.log
    CustomLog ${APACHE_LOG_DIR}/patchedvulnerableweb_access.log combined
</VirtualHost>
